<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lightning‚ö° ‚Äî Discord Bot Developer</title>
  <meta name="description" content="Boty na zam√≥wienie, automatyzacje, wdro≈ºenia i utrzymanie." />

  <style>
    :root{
      --bg:#070914;
      --panel:#0b1024;
      --text:#F9FAFB;
      --muted:#9CA3AF;

      /* ‚ö° Yellow Storm */
      --accent:#FFD84D;
      --accent2:#FFB703;

      --border:rgba(255,255,255,.08);
      --shadow:0 18px 60px rgba(0,0,0,.45);
      --shadow2: 0 20px 70px rgba(0,0,0,.55);
      --radius:18px;
    }

    *{box-sizing:border-box;min-width:0}
    html{-webkit-text-size-adjust:100%}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
      color:var(--text);
      background:
        radial-gradient(1100px 700px at 12% 12%, rgba(255,216,77,.18), transparent 55%),
        radial-gradient(900px 620px at 88% 22%, rgba(255,183,3,.12), transparent 55%),
        radial-gradient(900px 700px at 50% 95%, rgba(255,216,77,.08), transparent 60%),
        linear-gradient(180deg,#050615,#070914 40%,#050615);
      overflow-x:hidden;
    }
    a{color:inherit;text-decoration:none}
    .container{max-width:1000px;margin:0 auto;padding:24px}

    /* NAV */
    .nav{
      position:sticky;top:0;z-index:20;
      backdrop-filter:blur(10px);
      background:rgba(7,9,20,.62);
      border-bottom:1px solid var(--border);
    }
    .nav-inner{
      display:flex;align-items:center;justify-content:space-between;
      gap:14px;
    }
    .brand{display:flex;align-items:center;gap:12px;font-weight:900}
    .logo{
      width:40px;height:40px;border-radius:14px;
      background:linear-gradient(135deg,var(--accent),var(--accent2));
      box-shadow:0 10px 30px rgba(255,216,77,.40);
      display:flex;align-items:center;justify-content:center;
      color:#0b1024;font-size:20px;
      flex:0 0 auto; user-select:none;
    }
    .menu{
      display:flex;gap:10px;flex-wrap:nowrap;
      overflow-x:auto;-webkit-overflow-scrolling:touch;
      scrollbar-width:none;
    }
    .menu::-webkit-scrollbar{display:none}
    .menu a{
      padding:10px 12px;border-radius:12px;
      color:var(--muted);
      border:1px solid transparent;
      white-space:nowrap;
      flex:0 0 auto;
    }
    .menu a:hover{
      background:rgba(255,255,255,.05);
      color:var(--text);
      border-color:var(--border);
    }

    /* Buttons */
    .btn{
      display:inline-flex;align-items:center;justify-content:center;
      padding:12px 14px;border-radius:14px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      transition:.2s;
      white-space:nowrap;
      cursor:pointer;
    }
    .btn:hover{transform:translateY(-1px);background:rgba(255,255,255,.06)}
    .btn.primary{
      border-color:rgba(255,216,77,.6);
      background:linear-gradient(135deg, rgba(255,216,77,.95), rgba(255,183,3,.70));
      box-shadow:0 18px 55px rgba(255,183,3,.45);
      color:#0b1024;
      font-weight:900;
    }
    .btn:disabled{opacity:.6;cursor:not-allowed;transform:none}

    /* Cards + sections */
    section{padding:18px 0}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.045), rgba(255,255,255,.018));
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      display:flex;
      flex-direction:column;
    }

    /* HERO */
    .hero{padding:46px 0 8px}
    .hero-card{padding:28px}
    .kicker{
      display:inline-flex;gap:10px;align-items:center;
      padding:8px 12px;border-radius:999px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      color:var(--muted);
      font-size:13px;
    }
    h1{
      margin:14px 0 10px;
      font-size:clamp(34px,4.6vw,52px);
      line-height:1.05;
      letter-spacing:-.6px;
    }
    .grad{
      background:linear-gradient(90deg,#fff,var(--accent),var(--accent2));
      -webkit-background-clip:text;background-clip:text;color:transparent;
    }
    .sub{color:var(--muted);line-height:1.65;max-width:62ch;margin:10px 0 18px}
    .hero-actions{display:flex;gap:12px;flex-wrap:wrap}

    /* GRID */
    .grid{display:grid;gap:14px}
    .grid-2{
      grid-template-columns:1fr 1fr;
      align-items:stretch;
    }
    @media (max-width:900px){.grid-2{grid-template-columns:1fr}}

    /* SKILLS */
    .skills{padding:18px;height:fit-content}
    .skill{margin:12px 0}
    .skill-top{
      display:grid;grid-template-columns:1fr auto;
      gap:10px;align-items:center;margin-bottom:8px;
    }
    .skill-top b{
      font-size:14px;line-height:1.2;
      overflow:hidden;text-overflow:ellipsis;white-space:nowrap;
    }
    .skill-top i{
      font-style:normal;color:var(--muted);font-size:13px;white-space:nowrap;
    }
    .bar{
      height:12px;border-radius:999px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      overflow:hidden;
    }
    .bar > div{
      height:100%;width:0%;
      border-radius:999px;
      background:linear-gradient(90deg,var(--accent),var(--accent2));
      box-shadow:0 14px 40px rgba(255,183,3,.40);
      transition:width 900ms ease;
    }

    /* TAGS */
    .tag{
      display:inline-flex;align-items:center;justify-content:center;
      padding:8px 10px;border-radius:999px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      font-size:12px;font-weight:800;
      color:var(--muted);
      line-height:1;
    }
    .badge{
      display:inline-flex;align-items:center;gap:8px;
      padding:7px 10px;border-radius:999px;
      border:1px solid rgba(255,216,77,.35);
      background:rgba(255,216,77,.10);
      color:rgba(255,216,77,.95);
      font-size:12px;font-weight:900;
      line-height:1;
      white-space:nowrap;
    }

    /* STATUS */
    .status{
      margin-top:14px;padding-top:14px;
      border-top:1px solid var(--border);
      display:flex;gap:10px;flex-wrap:wrap;
    }

    /* PROCESS */
    .process{
      margin-top:14px;padding-top:14px;
      border-top:1px solid var(--border);
      display:grid;gap:8px;
    }
    .step{
      display:flex;gap:10px;align-items:center;
      padding:8px 10px;border-radius:14px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      color:var(--muted);
    }
    .step span{
      color:var(--accent);
      font-weight:900;
      width:28px;
    }

    /* FEATURES */
    .feature-card{
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      border-radius:16px;
      padding:14px;
      transition:.18s ease;
    }
    .feature-card:hover{
      transform:translateY(-2px);
      box-shadow:var(--shadow2);
      border-color:rgba(255,255,255,.12);
    }
    .feature-card b{display:block;margin-bottom:8px}
    .feature-tags{display:flex;gap:10px;flex-wrap:wrap}

    .features{padding:18px;}
    .features .features-body{flex:1;display:flex;flex-direction:column;}

    /* PRICING */
    @media (max-width:900px){
      #pricingGrid{grid-template-columns:1fr !important;}
    }
    .priceRow{
      margin-top:10px;
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }
    .priceMain{
      font-size:22px;
      font-weight:950;
      letter-spacing:-.2px;
    }
    .priceSub{
      color:var(--muted);
      font-weight:800;
      font-size:13px;
    }
    .miniList{
      margin-top:10px;
      color:var(--muted);
      line-height:1.6;
      font-size:13px;
    }
    .miniList .dot{
      display:inline-block;
      width:7px;height:7px;border-radius:99px;
      background:rgba(255,216,77,.85);
      margin-right:8px;
      transform:translateY(-1px);
    }
    .glow{
      border-color:rgba(255,216,77,.35) !important;
      box-shadow:0 22px 80px rgba(255,183,3,.18);
      background:linear-gradient(180deg, rgba(255,216,77,.10), rgba(255,255,255,.02));
    }

    /* MODALS */
    #modalDetails, #modalOrder{
      position:fixed;inset:0;display:none;
      align-items:center;justify-content:center;
      padding:16px;z-index:60;
    }
    .modalBackdrop{
      position:absolute;inset:0;background:rgba(0,0,0,.65);
      backdrop-filter:blur(6px);
    }

    /* Form */
    .field{display:grid;gap:6px;margin-top:10px}
    .field label{font-size:13px;color:var(--muted);font-weight:800}
    .input, .textarea{
      width:100%;
      border-radius:14px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      color:var(--text);
      padding:12px;
      outline:none;
    }
    .input:focus, .textarea:focus{
      border-color:rgba(255,216,77,.40);
      box-shadow:0 0 0 4px rgba(255,216,77,.10);
    }
    .textarea{min-height:120px;resize:vertical}
    .hint{color:var(--muted);font-size:12px;line-height:1.55;margin-top:10px}
    .ok{color:#b7f7c8}
    .warn{color:#ffd6a5}

    /* Footer */
    footer{
      margin-top:18px;
      padding:22px 0 36px;
      border-top:1px solid var(--border);
      color:var(--muted);
    }
    .foot{
      display:flex;justify-content:space-between;gap:12px;
      flex-wrap:wrap;align-items:center;
    }

    /* Mobile */
    @media (max-width:520px){
      .container{padding:16px}
      .hero-card{padding:18px}
      .btn{padding:10px 12px;border-radius:12px}
      .kicker{font-size:12px}
      .tag{padding:7px 9px;font-size:11px}
      .bar{height:10px}
      .priceMain{font-size:20px}
    }
  </style>
</head>

<body>
  <div class="nav">
    <div class="container nav-inner">
      <div class="brand">
        <div class="logo">‚ö°</div>
        <div>
          <div style="line-height:1">Lightning‚ö°</div>
          <div style="font-size:12px;color:var(--muted);font-weight:700;margin-top:2px">Discord Bot Developer</div>
        </div>
      </div>

      <a class="btn primary" href="https://discord.gg/72MHB8DDaJ" target="_blank" rel="noreferrer">Discord</a>
    </div>
  </div>

  <main class="container">
    <!-- HERO -->
    <section class="hero">
      <div class="card hero-card">
        <div class="kicker">‚ö° Boty Discord ‚Ä¢ automatyzacje ‚Ä¢ wdro≈ºenia</div>
        <h1>Minimalnie. Stabilnie. <span class="grad">Z burzƒÖ</span>.</h1>
        <p class="sub">
          Boty, kt√≥re dzia≈ÇajƒÖ 24/7: moderacja, tickety, role i integracje.
          Wdro≈ºenie + utrzymanie ‚Äî je≈õli chcesz, biorƒô to na siebie.
        </p>
        <div class="hero-actions">
          <a class="btn primary" href="#pricing">Zobacz pakiety</a>
          <a class="btn" href="https://discord.gg/72MHB8DDaJ" target="_blank" rel="noreferrer">Kontakt (Discord)</a>
          <a class="btn" href="https://github.com/twojprofil" target="_blank" rel="noreferrer">GitHub</a>
        </div>
      </div>
    </section>

    <!-- SKILLS + MO≈ªLIWO≈öCI -->
    <section id="skills">
      <div class="grid grid-2">
        <!-- LEFT: Skills -->
        <div class="card skills">
          <div class="skill" data-skill="95">
            <div class="skill-top"><b>Discord.js / TypeScript</b><i>95%</i></div>
            <div class="bar"><div></div></div>
          </div>
          <div class="skill" data-skill="90">
            <div class="skill-top"><b>API / Integracje</b><i>90%</i></div>
            <div class="bar"><div></div></div>
          </div>
          <div class="skill" data-skill="85">
            <div class="skill-top"><b>Bazy danych</b><i>85%</i></div>
            <div class="bar"><div></div></div>
          </div>
          <div class="skill" data-skill="80">
            <div class="skill-top"><b>Hosting / DevOps</b><i>80%</i></div>
            <div class="bar"><div></div></div>
          </div>

          <div class="status">
            <span class="tag">üü¢ Dostƒôpny</span>
            <span class="tag">‚è±Ô∏è Odpowied≈∫ do 24h</span>
            <span class="tag">‚ö° Realizacja 14 dni</span>
          </div>

          <div class="process">
            <div class="step"><span>01</span> Kontakt</div>
            <div class="step"><span>02</span> Ustalenie zakresu</div>
            <div class="step"><span>03</span> Implementacja</div>
            <div class="step"><span>04</span> Wdro≈ºenie</div>
          </div>
        </div>

        <!-- RIGHT: Mo≈ºliwo≈õci -->
        <div class="card features">
          <div class="features-body">
            <h2 style="margin:0 0 10px">Mo≈ºliwo≈õci</h2>
            <p style="margin:0; color:var(--muted); line-height:1.7">
              Bot dopasowany do serwera: moderacja, automatyzacje i narzƒôdzia administracyjne.
              Modu≈Çowa budowa, stabilne wdro≈ºenie i opcjonalne utrzymanie.
            </p>

            <div style="margin-top:14px; display:grid; gap:10px">
              <div class="feature-card">
                <b>üõ°Ô∏è Moderacja</b>
                <div class="feature-tags">
                  <span class="tag">Antylink</span>
                  <span class="tag">Antyreklama</span>
                  <span class="tag">Logi</span>
                  <span class="tag">Admin</span>
                </div>
              </div>

              <div class="feature-card">
                <b>‚öôÔ∏è Automatyzacje</b>
                <div class="feature-tags">
                  <span class="tag">Tickety</span>
                  <span class="tag">Weryfikacja</span>
                  <span class="tag">Powitania</span>
                  <span class="tag">Propozycje</span>
                </div>
              </div>

              <div class="feature-card">
                <b>üìà Narzƒôdzia</b>
                <div class="feature-tags">
                  <span class="tag">Statystyki</span>
                  <span class="tag">Embeds</span>
                  <span class="tag">Ankiety</span>
                  <span class="tag">Opinie</span>
                </div>
              </div>

              <div class="feature-card">
                <b>üß† Systemy custom</b>
                <div class="feature-tags">
                  <span class="tag">Ekonomia</span>
                  <span class="tag">Levelowanie</span>
                  <span class="tag">Questy</span>
                  <span class="tag">Rankingi</span>
                </div>
              </div>
            </div>

            <div style="flex:1"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- PRICING -->
    <section id="pricing">
      <div class="card" style="padding:18px">
        <div style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap; align-items:flex-end">
          <div>
            <h2 style="margin:0 0 8px">Cennik</h2>
            <p style="margin:0; color:var(--muted); line-height:1.7">
              Wybierz pakiet ‚Üí Szczeg√≥≈Çy ‚Üí Zam√≥w (zam√≥wienie leci prosto na Discord).
            </p>
          </div>
        </div>

        <div id="pricingGrid" class="grid" style="grid-template-columns:repeat(3,1fr); margin-top:14px"></div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer id="contact">
      <div class="foot">
        <div>¬© <span id="year"></span> Lightning‚ö°</div>
        <div style="display:flex; gap:10px; flex-wrap:wrap">
          <a class="btn primary" href="https://discord.gg/72MHB8DDaJ" target="_blank" rel="noreferrer">Discord</a>
          <a class="btn" href="https://github.com/twojprofil" target="_blank" rel="noreferrer">GitHub</a>
        </div>
      </div>
    </footer>
  </main>

  <!-- MODAL: DETAILS -->
  <div id="modalDetails">
    <div class="modalBackdrop" data-close="details"></div>
    <div class="card" style="position:relative;max-width:760px;width:100%;padding:18px;z-index:1">
      <div style="display:flex;justify-content:space-between;gap:10px;align-items:flex-start">
        <div>
          <div id="detailsBadgeWrap" style="margin-bottom:8px"></div>
          <h3 id="detailsTitle" style="margin:0 0 6px"></h3>
          <div id="detailsPrice" style="color:var(--muted);font-weight:800"></div>
        </div>
        <button class="btn" data-close="details">Zamknij</button>
      </div>

      <div id="detailsMeta" style="margin-top:10px;color:var(--muted);line-height:1.7"></div>
      <div id="detailsFeatures" style="margin-top:12px;color:var(--muted);line-height:1.7"></div>

      <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
        <button id="detailsOrderBtn" class="btn primary">Zam√≥w</button>
      </div>
    </div>
  </div>

  <!-- MODAL: ORDER -->
  <div id="modalOrder">
    <div class="modalBackdrop" data-close="order"></div>
    <div class="card" style="position:relative;max-width:760px;width:100%;padding:18px;z-index:1">
      <div style="display:flex;justify-content:space-between;gap:10px;align-items:flex-start">
        <div>
          <div id="orderBadgeWrap" style="margin-bottom:8px"></div>
          <h3 id="orderTitle" style="margin:0 0 6px">Zam√≥wienie</h3>
          <div id="orderMeta" style="color:var(--muted);font-weight:800"></div>
        </div>
        <button class="btn" data-close="order">Zamknij</button>
      </div>

      <!-- honeypot (anty-bot) -->
      <input id="hpWebsite" class="input" style="display:none" autocomplete="off" tabindex="-1" />

      <div class="field">
        <label>Nick / ID (opcjonalnie)</label>
        <input id="fUser" class="input" placeholder="np. Lightning#0001 / 123..." />
      </div>

      <div class="field">
        <label>Serwer (link / ID) (opcjonalnie)</label>
        <input id="fGuild" class="input" placeholder="np. https://discord.gg/... lub ID" />
      </div>

      <div class="field">
        <label>Opis wymaga≈Ñ (wymagane)</label>
        <textarea id="fDesc" class="textarea" placeholder="Co ma robiƒá bot? Jakie funkcje?"></textarea>
      </div>

      <div class="field">
        <label>Termin (opcjonalnie)</label>
        <input id="fDeadline" class="input" placeholder="np. 7 dni / do piƒÖtku" />
      </div>

      <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
        <button id="webhookOrderBtn" class="btn primary">Zam√≥w</button>
      </div>

      <div id="orderStatus" class="hint"></div>
    </div>
  </div>

  <script>
    // Year
    document.getElementById("year").textContent = new Date().getFullYear();

    // Skills bars
    window.addEventListener("load", () => {
      document.querySelectorAll(".skill").forEach(s => {
        const pct = s.getAttribute("data-skill") || "0";
        const bar = s.querySelector(".bar > div");
        if (bar) bar.style.width = pct + "%";
      });
    });

    // ================= PAKIETY (DOSTOSOWANE CENY) =================
    const packages = [
      {
        id: "starter",
        label: "Starter",
        emoji: "üå±",
        price: 29,
        psc: 39,
        bestFor: "Start serwera ‚Ä¢ podstawowa automatyzacja",
        highlights: ["Szybka konfiguracja", "Czytelny panel", "Stabilne dzia≈Çanie"],
        features: [
          "Komendy administracyjne",
          "Statystyki serwera",
          "Weryfikacja u≈ºytkownik√≥w",
          "Powitania i po≈ºegnania",
          "Generator embed√≥w",
          "System propozycji"
        ]
      },
      {
        id: "standard",
        label: "Standard",
        emoji: "‚öôÔ∏è",
        price: 49,
        psc: 59,
        bestFor: "Serwery spo≈Çeczno≈õciowe ‚Ä¢ porzƒÖdek i bezpiecze≈Ñstwo",
        highlights: ["Lepsza moderacja", "Ochrona przed reklamƒÖ", "Wiƒôcej automatyzacji"],
        features: [
          "Wszystko z pakietu Starter",
          "Antylink i antyreklama",
          "Konkursy",
          "Logi moderacyjne"
        ]
      },
      {
        id: "advanced",
        label: "Zaawansowany",
        emoji: "üöÄ",
        price: 79,
        psc: 89,
        bestFor: "Aktywne serwery ‚Ä¢ support i rozbudowa",
        highlights: ["System ticket√≥w", "Ankiety", "Rozbudowane logi"],
        features: [
          "Wszystko z pakietu Standard",
          "Tickety",
          "Ankiety",
          "Logi serwerowe",
          "System boostowania"
        ],
        badge: "‚≠ê Najczƒô≈õciej wybierany"
      },
      {
        id: "business",
        label: "Biznes",
        emoji: "üíº",
        price: 119,
        psc: 139,
        bestFor: "Us≈Çugi ‚Ä¢ zam√≥wienia ‚Ä¢ profesjonalna obs≈Çuga",
        highlights: ["Opinie klient√≥w", "Sticky messages", "System losowa≈Ñ"],
        features: [
          "Tickety",
          "Legit check",
          "Sticky messages",
          "Opinie",
          "Kalkulator prowizji",
          "Losowania"
        ]
      },
      {
        id: "commerce",
        label: "Sklep",
        emoji: "üõí",
        price: 149,
        psc: 169,
        bestFor: "Sklepy Discord ‚Ä¢ automatyzacja sprzeda≈ºy",
        highlights: ["Cenniki", "Ping menu", "Dane p≈Çatno≈õci auto"],
        features: [
          "Wszystko z pakietu Biznes",
          "Cenniki",
          "Ping menu",
          "Automatyczne dane p≈Çatno≈õci",
          "Logi ticket√≥w"
        ],
        badge: "üî• Najlepsza warto≈õƒá"
      },
      {
        id: "enterprise",
        label: "Na zam√≥wienie",
        emoji: "üß©",
        price: null,
        psc: null,
        bestFor: "Nietypowe wymagania ‚Ä¢ integracje ‚Ä¢ du≈ºe projekty",
        highlights: ["Integracje API", "Hosting", "Wsparcie premium"],
        features: [
          "System szyty na miarƒô",
          "Hosting",
          "Wsparcie techniczne",
          "Dowolne integracje"
        ],
        customPriceText: "üí∏ Cena: Do ustalenia (wycena po wymaganiach)"
      }
    ];

    // ================= UI HELPERS =================
    const modalDetails = document.getElementById("modalDetails");
    const detailsTitle = document.getElementById("detailsTitle");
    const detailsPrice = document.getElementById("detailsPrice");
    const detailsMeta = document.getElementById("detailsMeta");
    const detailsFeatures = document.getElementById("detailsFeatures");
    const detailsOrderBtn = document.getElementById("detailsOrderBtn");
    const detailsBadgeWrap = document.getElementById("detailsBadgeWrap");

    const modalOrder = document.getElementById("modalOrder");
    const orderMeta = document.getElementById("orderMeta");
    const orderTitle = document.getElementById("orderTitle");
    const orderBadgeWrap = document.getElementById("orderBadgeWrap");
    const webhookOrderBtn = document.getElementById("webhookOrderBtn");
    const orderStatus = document.getElementById("orderStatus");

    const fUser = document.getElementById("fUser");
    const fGuild = document.getElementById("fGuild");
    const fDesc = document.getElementById("fDesc");
    const fDeadline = document.getElementById("fDeadline");
    const hpWebsite = document.getElementById("hpWebsite");

    let selectedPack = null;

    function openModal(el){
      el.style.display = "flex";
      document.body.style.overflow = "hidden";
    }
    function closeModal(el){
      el.style.display = "none";
      document.body.style.overflow = "";
    }

    document.addEventListener("click", (e) => {
      const closeBtn = e.target.closest("[data-close]");
      if (closeBtn) {
        const which = closeBtn.getAttribute("data-close");
        if (which === "details") closeModal(modalDetails);
        if (which === "order") closeModal(modalOrder);
      }
    });
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        closeModal(modalDetails);
        closeModal(modalOrder);
      }
    });

    function priceLine(p){
      return p.id === "enterprise"
        ? (p.customPriceText || "Cena do ustalenia")
        : `üí∏ ${p.price} PLN ‚Ä¢ üí≥ PSC: ${p.psc} PLN`;
    }

    function orderPriceForWebhook(p){
      return p.id === "enterprise"
        ? "Cena: do ustalenia"
        : `Cena: ${p.price} PLN | PSC: ${p.psc} PLN`;
    }

    // ‚úÖ Cloudflare Pages Functions endpoint (ten sam host): /order
    const ORDER_API = "/order";

    async function sendOrderWebhook(pack, extra){
      const payload = {
        packId: pack.id,
        packLabel: pack.label,
        priceLine: orderPriceForWebhook(pack),
        user: extra.user,
        guild: extra.guild,
        deadline: extra.deadline,
        desc: extra.desc,
        hpWebsite: (hpWebsite.value || "").trim()
      };

      const res = await fetch(ORDER_API, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });

      if (!res.ok) {
        const t = await res.text();
        throw new Error(t || "B≈ÇƒÖd wysy≈Çki");
      }
      return true;
    }

    function getExtra(){
      return {
        user: fUser.value.trim(),
        guild: fGuild.value.trim(),
        desc: fDesc.value.trim(),
        deadline: fDeadline.value.trim(),
      };
    }

    function resetOrderForm(){
      fUser.value = "";
      fGuild.value = "";
      fDesc.value = "";
      fDeadline.value = "";
      hpWebsite.value = "";
    }

    // ================= PRICING RENDER =================
    const grid = document.getElementById("pricingGrid");

    function makeHighlightsHTML(arr){
      if (!Array.isArray(arr) || arr.length === 0) return "";
      return `
        <div class="miniList">
          ${arr.slice(0,3).map(x => `<div><span class="dot"></span>${escapeHtml(x)}</div>`).join("")}
        </div>
      `;
    }

    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    if (grid) {
      packages.forEach(p => {
        const el = document.createElement("div");
        el.className = "feature-card";
        el.style.borderRadius = "18px";

        if (p.badge) el.classList.add("glow");

        const priceHtml = p.id === "enterprise"
          ? `<div class="priceMain">Wycena</div><div class="priceSub">${escapeHtml(p.customPriceText || "Cena do ustalenia")}</div>`
          : `<div class="priceMain">${p.price} PLN</div><div class="priceSub">PSC: ${p.psc} PLN</div>`;

        el.innerHTML = `
          <div style="display:flex;justify-content:space-between;gap:10px;align-items:flex-start">
            <div>
              <b style="font-size:16px">${p.emoji} ${escapeHtml(p.label)}</b>
              ${p.badge ? `<div style="margin-top:8px"><span class="badge">${escapeHtml(p.badge)}</span></div>` : ``}
            </div>
            <span class="tag">Pakiet</span>
          </div>

          <div class="priceRow">
            <div>${priceHtml}</div>
          </div>

          ${p.bestFor ? `<div style="margin-top:10px;color:var(--muted);font-weight:800;font-size:13px">${escapeHtml(p.bestFor)}</div>` : ``}

          ${makeHighlightsHTML(p.highlights)}

          <div style="margin-top:12px;color:var(--muted);line-height:1.6">
            ‚Ä¢ ${p.features.slice(0,3).map(escapeHtml).join("<br>‚Ä¢ ")}${p.features.length > 3 ? "<br>‚Ä¢ ‚Ä¶" : ""}
          </div>

          <div style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap">
            <button class="btn" data-details="${p.id}">Szczeg√≥≈Çy</button>
            <button class="btn primary" data-order="${p.id}">Zam√≥w</button>
          </div>
        `;
        grid.appendChild(el);
      });
    }

    // ================= DETAILS MODAL =================
    function showDetails(pack){
      selectedPack = pack;

      detailsTitle.textContent = `${pack.emoji} Pakiet ${pack.label}`;
      detailsPrice.textContent = priceLine(pack);

      detailsBadgeWrap.innerHTML = pack.badge ? `<span class="badge">${escapeHtml(pack.badge)}</span>` : "";

      detailsMeta.innerHTML = `
        ${pack.bestFor ? `<div><b style="color:var(--text)">Dla kogo:</b> <span style="color:var(--muted)">${escapeHtml(pack.bestFor)}</span></div>` : ""}
        ${Array.isArray(pack.highlights) && pack.highlights.length
          ? `<div style="margin-top:10px"><b style="color:var(--text)">Najwa≈ºniejsze:</b>
              <div class="miniList">${pack.highlights.map(x => `<div><span class="dot"></span>${escapeHtml(x)}</div>`).join("")}</div>
            </div>`
          : ``}
      `;

      detailsFeatures.innerHTML = `
        <div style="font-weight:900;color:var(--text);margin-bottom:6px">Funkcje</div>
        <div style="color:var(--muted)">‚Ä¢ ${pack.features.map(escapeHtml).join("<br>‚Ä¢ ")}</div>
      `;

      openModal(modalDetails);
    }

    // ================= ORDER MODAL =================
    function showOrder(pack){
      selectedPack = pack;

      orderStatus.textContent = "";
      orderStatus.className = "hint";
      resetOrderForm();

      orderTitle.textContent = `Zam√≥wienie ‚Äî ${pack.emoji} ${pack.label}`;
      orderMeta.textContent = priceLine(pack);
      orderBadgeWrap.innerHTML = pack.badge ? `<span class="badge">${escapeHtml(pack.badge)}</span>` : "";

      openModal(modalOrder);
    }

    document.addEventListener("click", (e) => {
      const d = e.target.closest("[data-details]");
      if (d) {
        const id = d.getAttribute("data-details");
        const pack = packages.find(x => x.id === id);
        if (pack) showDetails(pack);
      }

      const o = e.target.closest("[data-order]");
      if (o) {
        const id = o.getAttribute("data-order");
        const pack = packages.find(x => x.id === id);
        if (pack) showOrder(pack);
      }
    });

    detailsOrderBtn.addEventListener("click", () => {
      if (!selectedPack) return;
      closeModal(modalDetails);
      showOrder(selectedPack);
    });

    // ‚úÖ Wy≈õlij webhook -> Cloudflare Pages Functions (/order)
    webhookOrderBtn.addEventListener("click", async () => {
      if (!selectedPack) return;

      // honeypot
      if ((hpWebsite.value || "").trim().length > 0) {
        orderStatus.textContent = "‚ö†Ô∏è Wykryto bota. Spr√≥buj ponownie.";
        orderStatus.className = "hint warn";
        return;
      }

      const extra = getExtra();
      if ((extra.desc || "").length < 10) {
        orderStatus.textContent = "‚ö†Ô∏è Opis jest za kr√≥tki (min. 10 znak√≥w).";
        orderStatus.className = "hint warn";
        return;
      }

      try {
        webhookOrderBtn.disabled = true;
        orderStatus.textContent = "‚è≥ Wysy≈Çam...";
        orderStatus.className = "hint";

        await sendOrderWebhook(selectedPack, extra);

        orderStatus.textContent = "‚úÖ Wys≈Çano! Dziƒôki ‚Äî odezwƒô siƒô wkr√≥tce.";
        orderStatus.className = "hint ok";

        // Auto close after a moment
        setTimeout(() => {
          closeModal(modalOrder);
          resetOrderForm();
          orderStatus.textContent = "";
          orderStatus.className = "hint";
        }, 1000);
      } catch (e) {
        orderStatus.textContent = "‚ö†Ô∏è B≈ÇƒÖd wysy≈Çki: " + (e?.message || "unknown");
        orderStatus.className = "hint warn";
      } finally {
        webhookOrderBtn.disabled = false;
      }
    });
  </script>
</body>
</html>
